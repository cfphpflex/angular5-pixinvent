{"version":3,"sources":["../../../src/model/pointPool.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,KAAK,EAAC,MAAM,SAAS,CAAC;AAE9B;IAOI,mBAAY,WAAmB;QAC3B,SAAS,CAAC,SAAS,GAAG,IAAI,CAAC;QAC3B,IAAI,IAAI,GAAS,IAAI,CAAC,cAAc,GAAG,IAAI,KAAK,EAAE,CAAC;QAEnD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,EAAE,CAAC,EAAE,EAAE,CAAC;YAEnC,IAAI,CAAC,GAAG,IAAI,KAAK,EAAE,CAAC;YACpB,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;YACd,IAAI,GAAG,CAAC,CAAC;QACb,CAAC;IACL,CAAC;IAED,sBAAW,qBAAQ;aAAnB;YACI,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC;QAC/B,CAAC;;;OAAA;IAEM,0BAAM,GAAb,UAAc,CAAS,EAAE,CAAS;QAC9B,EAAE,CAAC,CAAC,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,CAAC,CAAC;YAC9B,MAAM,gBAAgB,CAAC;QAC3B,CAAC;QACD,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,IAAI,CAAC,GAAU,IAAI,CAAC,cAAc,CAAC;QACnC,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,IAAI,CAAC;QAC7B,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACR,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACR,MAAM,CAAC,CAAC,CAAC;IACb,CAAC;IAAA,CAAC;IAEK,+BAAW,GAAlB,UAAmB,CAAQ;QACvB,IAAI,CAAC,QAAQ,EAAE,CAAC;QAChB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACR,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;QACR,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC;QAC7B,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;IAC5B,CAAC;IAAA,CAAC;IACN,gBAAC;AAAD,CA1CA,AA0CC,IAAA","file":"pointPool.js","sourceRoot":"","sourcesContent":["import {Point} from './point';\n\nexport class PointPool {\n\n    private static _instance: PointPool;\n\n    private borrowed: number;\n    private firstAvailable: Point;\n\n    constructor(initialSize: number) {\n        PointPool._instance = this;\n        let prev:Point = this.firstAvailable = new Point();\n\n        for (let i = 1; i < initialSize; i++) {\n\n            let p = new Point();\n            prev.next = p;\n            prev = p;\n        }\n    }\n\n    static get instance(): PointPool {\n        return PointPool._instance;\n    }\n\n    public borrow(x: number, y: number): Point {\n        if (this.firstAvailable == null) {\n            throw 'Pool exhausted';\n        }\n        this.borrowed++;\n        let p: Point = this.firstAvailable;\n        this.firstAvailable = p.next;\n        p.x = x;\n        p.y = y;\n        return p;\n    };\n\n    public returnPoint(p: Point) {\n        this.borrowed--;\n        p.x = 0;\n        p.y = 0;\n        p.next = this.firstAvailable;\n        this.firstAvailable = p;\n    };\n}\n"]}