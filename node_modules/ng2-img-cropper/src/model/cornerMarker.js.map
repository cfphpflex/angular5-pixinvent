{"version":3,"sources":["../../../src/model/cornerMarker.ts"],"names":[],"mappings":"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","file":"cornerMarker.js","sourceRoot":"","sourcesContent":["import {Handle, IHandle} from './handle';\nimport {CropperSettings} from '../cropperSettings';\n\nexport interface ICornerMarker extends IHandle {\n    horizontalNeighbour: CornerMarker;\n    verticalNeighbour: CornerMarker;\n}\n\nexport class CornerMarker extends Handle implements ICornerMarker {\n\n    public horizontalNeighbour: CornerMarker;\n    public verticalNeighbour: CornerMarker;\n\n    constructor(x: number, y: number, radius: number, cropperSettings: CropperSettings) {\n        super(x, y, radius, cropperSettings);\n    }\n\n    public drawCornerBorder(ctx: CanvasRenderingContext2D): void {\n        let sideLength: number = 10;\n        if (this.over || this.drag) {\n            sideLength = 12;\n        }\n\n        let hDirection: number = 1;\n        let vDirection: number = 1;\n        if (this.horizontalNeighbour.position.x < this.position.x) {\n            hDirection = -1;\n        }\n        if (this.verticalNeighbour.position.y < this.position.y) {\n            vDirection = -1;\n        }\n\n        if (this.cropperSettings.rounded) {\n            let width: number = this.position.x - this.horizontalNeighbour.position.x;\n            let height: number = this.position.y - this.verticalNeighbour.position.y;\n\n            let offX: number = Math.round(Math.sin(Math.PI / 2) * Math.abs(width / 2)) / 4;\n            let offY: number = Math.round(Math.sin(Math.PI / 2) * Math.abs(height / 2)) / 4;\n\n            this.offset.x = hDirection > 0 ? offX : -offX;\n            this.offset.y = vDirection > 0 ? offY : -offY;\n        } else {\n            this.offset.x = 0;\n            this.offset.y = 0;\n        }\n\n        ctx.beginPath();\n        ctx.lineJoin = 'miter';\n        ctx.moveTo(this.position.x + this.offset.x, this.position.y + this.offset.y);\n        ctx.lineTo(this.position.x + this.offset.x + (sideLength * hDirection), this.position.y + this.offset.y);\n        ctx.lineTo(this.position.x + this.offset.x + (sideLength * hDirection), this.position.y + this.offset.y +\n            (sideLength * vDirection));\n        ctx.lineTo(this.position.x + this.offset.x, this.position.y + this.offset.y + (sideLength * vDirection));\n        ctx.lineTo(this.position.x + this.offset.x, this.position.y + this.offset.y);\n        ctx.closePath();\n        ctx.lineWidth = this.cropperSettings.cropperDrawSettings.strokeWidth;\n        ctx.strokeStyle = this.cropperSettings.cropperDrawSettings.strokeColor;\n        ctx.stroke();\n    }\n\n    public drawCornerFill(ctx: CanvasRenderingContext2D): void {\n        let sideLength: number = 10;\n        if (this.over || this.drag) {\n            sideLength = 12;\n        }\n        let hDirection: number = 1;\n        let vDirection: number = 1;\n        if (this.horizontalNeighbour.position.x < this.position.x) {\n            hDirection = -1;\n        }\n        if (this.verticalNeighbour.position.y < this.position.y) {\n            vDirection = -1;\n        }\n        ctx.beginPath();\n        ctx.moveTo(this.position.x + this.offset.x, this.position.y + this.offset.y);\n        ctx.lineTo(this.position.x + this.offset.x + (sideLength * hDirection), this.position.y + this.offset.y);\n        ctx.lineTo(this.position.x + this.offset.x + (sideLength * hDirection), this.position.y + this.offset.y +\n            (sideLength * vDirection));\n        ctx.lineTo(this.position.x + this.offset.x, this.position.y + this.offset.y + (sideLength * vDirection));\n        ctx.lineTo(this.position.x + this.offset.x, this.position.y + this.offset.y);\n        ctx.closePath();\n        ctx.fillStyle = 'rgba(255,255,255,.7)';\n        ctx.fill();\n    }\n\n    public moveX(x: number): void {\n        this.setPosition(x, this.position.y);\n    }\n\n    public moveY(y: number): void {\n        this.setPosition(this.position.x, y);\n    }\n\n    public move(x: number, y: number): void {\n        this.setPosition(x, y);\n        this.verticalNeighbour.moveX(x);\n        this.horizontalNeighbour.moveY(y);\n    }\n\n    public addHorizontalNeighbour(neighbour: CornerMarker): void {\n        this.horizontalNeighbour = neighbour;\n    }\n\n    public addVerticalNeighbour(neighbour: CornerMarker): void {\n        this.verticalNeighbour = neighbour;\n    }\n\n    public getHorizontalNeighbour(): CornerMarker {\n        return this.horizontalNeighbour;\n    }\n\n    public getVerticalNeighbour(): CornerMarker {\n        return this.verticalNeighbour;\n    }\n\n    public draw(ctx: CanvasRenderingContext2D): void {\n        this.drawCornerFill(ctx);\n        this.drawCornerBorder(ctx);\n    }\n\n}\n"]}